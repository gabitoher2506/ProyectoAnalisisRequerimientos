{% extends 'base.html' %}

{% block title %}Consultar Ventas{% endblock %}
{% set show_navigation = true %}
{% block content %}
    <h1>Consultar Ventas Mensuales</h1>

    <form id="consultarVentasForm">
        <div class="form-group">
            <label for="empleado">Empleado:</label>
            <input type="text" id="empleado" name="empleado" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="periodo">Periodo:</label>
            <select id="periodo" name="periodo" class="form-control">
                <option value="Q1">Primer Cuatrimestre</option>
                <option value="Q2">Segundo Cuatrimestre</option>
                <option value="Q3">Tercer Cuatrimestre</option>
                <option value="Q4">Cuarto Cuatrimestre</option>
            </select>
        </div>
        <button type="button" class="btn btn-primary" onclick="consultarVentas()">Consultar</button>
    </form>

    <a href="{{ url_for('registrar_ventas') }}" class="btn btn-orange mt-3">Registrar Ventas</a>

    <div class="mt-3" id="ventas-table" style="display:none;">
        <h2>Ventas de Camila Luna</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Mes</th>
                    <th>Ventas</th>
                </tr>
            </thead>
            <tbody id="ventas-body">
                <!-- Los datos de las ventas se llenarán aquí -->
            </tbody>
        </table>
    </div>

    <script>
        function consultarVentas() {
            var periodo = document.getElementById('periodo').value;
            var ventasTable = document.getElementById('ventas-table');
            var ventasBody = document.getElementById('ventas-body');

            var ventasDatos = {
                'Q1': [
                    { mes: 'Enero', ventas: '₡500,000' },
                    { mes: 'Febrero', ventas: '₡450,000' },
                    { mes: 'Marzo', ventas: '₡550,000' },
                ],
                'Q2': [
                    { mes: 'Abril', ventas: '₡600,000' },
                    { mes: 'Mayo', ventas: '₡620,000' },
                    { mes: 'Junio', ventas: '₡630,000' },
                ],
                'Q3': [
                    { mes: 'Julio', ventas: '₡700,000' },
                    { mes: 'Agosto', ventas: '₡710,000' },
                    { mes: 'Septiembre', ventas: '₡720,000' },
                ],
                'Q4': [
                    { mes: 'Octubre', ventas: '₡750,000' },
                    { mes: 'Noviembre', ventas: '₡760,000' },
                    { mes: 'Diciembre', ventas: '₡770,000' },
                ],
            };

            ventasBody.innerHTML = '';

            if (ventasDatos[periodo]) {
                ventasDatos[periodo].forEach(function(dato) {
                    var row = document.createElement('tr');
                    row.innerHTML = `<td>${dato.mes}</td><td>${dato.ventas}</td>`;
                    ventasBody.appendChild(row);
                });
                ventasTable.style.display = 'block';
            } else {
                ventasTable.style.display = 'none';
            }
        }
    </script>
{% endblock %}
